% !TeX spellcheck = en_US

\part{Overview}

% An overview should contain:

% * why read?
%   * problems being solved
%   * goals to be achieved
%   * 
% * how
%   * erp

\chapter{What is LedgerSMB}

\section{Introduction}
LedgerSMB is an open source, web based \gls{erp}. This means it aspires to be
\textit{the} integrated administration system for your business. It includes a
powerful framework which supports businesses to build their own extensions or
integrations with other applications.

The software is being developed by the LedgerSMB project with its homepage at \url{http://ledgersmb.org/}.
However, the actual project activity can be witnessed at the SourceForge
project site hosted at \url{http://sf.net/projects/ledger-smb/} and the mailing list archive
hosted at \url{http://archive.ledgersmb.org/}.  The project
employs the Freenode.net IRC network's \#ledgersmb chat channel to help out users and to discuss
development.

Its open source nature allows you to download it and use it with any
infrastructure you like. So there's no room for vendor lock-in: you can
always take your data and set up your system with another hardware vendor
or set up your own hardware.

\section{Overview of modules}
\label{sec:ModuleOverview}
As with most ERPs LedgerSMB is built up from multiple modules.  Many modules are
integrated parts of the base application.  New features are implemented in new
modules which are kept separate at first to allow
evaluation of the feature set before becoming part of the base system. These separate
modules - which are called \glspl{add-on} - have to be installed separately. After installation
these modules become seamless parts of LedgerSMB with no user visible difference from the base
application. This separation allows for different release schedules
and separate code maturity levels.


LedgerSMB 1.3 features the following integrated modules:

\begin{itemize}
\item General ledger
\item Payment and Accounts payable
\item Invoicing and Accounts receivable
\item Fixed asset accounting
\item Time registration and invoicing
\item Point of Sale
\item Quotation and Order management
\item Manufacturing
\item Inventory (warehousing) and shipping management
\item VAT reporting (cash based)
\item Controlling
\begin{itemize}
\item Project accounting
\item Department accounting
\item Budgeting (as an add-on)
\end{itemize}
\item Application administration
\end{itemize}

These add-ons can be installed:
\begin{itemize}
\item Enhanced AR and AP support
\item VAT reporting (accrual based)
\item Enhanced trial-balance report
\item Enhanced recurring transactions
\item Payroll (to be created - under discussion at the time of writing)
\end{itemize}

With this list of modules and add-ons LedgerSMB has succesfully been implemented
in shops, manufacturing companies and service oriented companies such as internet
service providers and self-employment situations.

\section{Feature comparison with alternatives}

@@@ TODO

Packages to compare to:

\begin{itemize}
\item GNUcash
\item OSfinancials
\item ERP5
\item OpenERP
\item xTuple
\end{itemize}

\section{Release history}

The project started out as a fork of SQL-Ledger - the open source \gls{erp}
developed by Dieter Simader - somewhere between SQL-Ledger versions 2.6
and 2.8.  A fork happens when a group of developers can't - for whatever
reason - continue to work as one group on a project.  At that time, the
project splits into two or more projects and the fork is in effect.

LedgerSMB split off from the SQL-Ledger project (i.e. forked) because
there was disagreement between developers about how to go forward both with
respect to handling of security vulnerability reports as well as the general
state of the code base.

After the fork, between versions 1.0 and 1.2 a lot of energy was spent on
making LedgerSMB more secure (i.e. less vulnerable).  In technical terms,
measures were taken to fend off (amongst other things):

\begin{itemize}
\item Cross site scripting attacks
\item Replay attacks
\item SQL injection attacks
\end{itemize}

Come version 1.3 the development directed toward improvement of the overall
quality of the code base as the old SQL-Ledger code was in very poor state:
looking very much like webscripts as they were written in 1998, the code had
grown largely outdated in style and was no longer maintainable by 2007.

The 1.3 effort focussed on bringing relief on that front by introducing
modern structure into the application.  With the new application structure
modern and important features were realized: separation of duties (for the
accounting part of the application) and authorizations to allow distinguishing
different roles in your company.

Unfortunately, by the beginning of 2011 the project looked mostly dead from
an outside perspective: the team had not brought forward any releases since
2007, there were no signs of development activity and the
mailing lists (a measure for community activity) were
completely silent.  SVN commits were continuing, but were being made by ever 
fewer committers and contributors.

Fortunately development activity was showing again in the first half 
year of 2011,
leading to the release of version 1.3 by September.  Between September and the
year end in total 10 small bug fixes were released, showing active commitment
of the developers to maintain the application.

New committers showed up, indicating revived community interest. Other signs of
increased interest are the higher number of bug reports and the creation of the
linux package for Debian 7, which has been included in Ubuntu 12.04 as of
October 2012.



\section{System requirements}

The INSTALL file which comes with every LedgerSMB software release should be
considered the authorative source of system requirements.  For the reader's
convenience, the system requirements for the 1.3.23 release have been included
below:

\begin{itemize}
\item Webserver; one of:
\begin{itemize}
\item Apache HTTPD % struck the version numbers.  I think 1.3 and higher would
% work.  --Chris T
\item LigHTTPd ???
\end{itemize}
\item Perl 5.10 or higher, with these (non-Core) modules:
\begin{itemize}
\item   Data::Dumper
\item   Log::Log4perl
\item   DateTime
\item   Locale::Maketext::Lexicon
\item   DBI
\item   MIME::Base64
\item   Digest::MD5
\item   HTML::Entities
\item   DBD::Pg
\item   Config::Std
\item   Template
\item   Error
\item   CGI::Simple
\item   File::MimeInfo
\end{itemize}
\item PostgreSQL 8.3 or higher, with these contribs:
\begin{itemize}
\item tablefunc
\item tsearch2
\end{itemize}
\item \LaTeX or XeLaTeX with TeTeX or TexLive (for PDF and Postscript output)
\end{itemize}

Other system requirements such as required RAM and number of CPUs and their speed
largely depend on the expected system activity.

\section{License}

LedgerSMB is being made available under the terms of the
\textit{GNU Public License version 2}, or shorter \textit{GPLv2}
\footnote{\url{http://www.opensource.org/licenses/GPL-2.0}}.

The project attaches this meaning to the license:
The copyright holders grant you the right to copy and
redistribute the software.  In case you make any modifications to the sofware
you're obligated to make public those changes.  You are however, free to use
the APIs from your own software without being required to publish your own software.

The project considers the following to be APIs:
\begin{itemize}
\item Database tables
\item URLs with their input and output
\item Webservices of any kind
\item Function and object calls
\end{itemize}

The effect of this interpretation is that changes directly to the code base as
well as inheritance of classes defined in the software constitute ''making modifications''.

\chapter{Reasons to use LedgerSMB}
\label{cha:Advocacy}

\begin{itemize}
\item Own your own data
\item Freedom to change
	\begin{itemize}
	\item Support organization
	\item Developer (organization)
	\item Data storage provider
	\item Application service provider
	\end{itemize}
\end{itemize}

\chapter{Overview}

@@@ Role of accounting (software) in the system? verifiability and ``being in control'' as well as ``internal controls''

\section{Introduction}
This section of the book describes functionalities of the modules listed in section \secref{sec:ModuleOverview}.  The information provided should be enough to get a clear
understanding of what the application can do for you as well as being a sound basis
for parts \ref{part:Configuration} Configuration and \ref{part:Administration} Administration.

For in-depth instruction for actual day to day use of LedgerSMB the reader is referred
to part \ref{part:Workflows} Workflows.


\section{Accounting principles}

The IFRS (International Financial Reporting Standards) describe requirements
to financial statements (reports) and the accounting process leading to such
reports \footnote{See also \url{http://en.wikipedia.org/wiki/International\_Financial\_Reporting\_Standards}}.
Said requirements include qualitative characteristics:

\begin{enumerate}
\item Relevance
\item Faithful representation
\item Comparability
\item Verifiability
\item Timeliness
\item Understandability
\end{enumerate}

While some - if not most - of these characteristics relate to the process of accounting,
the ``Verifiability'' item clearly has an impact on the underlaying accounting systems:
In order to be verifiable, there must be a clear audit trail to show the origin of the
figures.

\section{Internal control}

Internal control\footnote{See also \url{http://en.wikipedia.org/wiki/Internal\_control}}
helps organizations to prevent and detect fraud by introducing checks and balances
to assess effectiveness and validity of transactions in the organization and thereby
in its \gls{erp} and accounting system(s).


\section{Relation to accounting software}
\label{sec:AccountingSystemRequirements}

While both the qualitative characteristics from IFRS and the checks and balances
from the internal controls are pose restrictions on the accounting process,
sometimes these restrictions require support from the underlying accounting
software.

One example is the support for creating reliable accounting audit trails
by protecting accounting data from deletion. It's important to realize the scope
of accounting data in this respect: because invoices are being registered in the
accounts receivable administration - which is summarized in the general ledger -
they are part of the data for which the audit trail needs to be recorded.

Another example is separation of duties (also known as the ``four eye principle''),
where one accountant enters financial transactions and another is responsible for
posting them. This procedure protects the company from an accountant single-handedly
faking transactions and possibly masking fraud.

The requirements for good accounting processes and internal control have impact
on the work flows supported by LedgerSMB. As a consequence some of the work flows
described in part \ref{part:Workflows} may seem unwieldy; an example being the
lack of functionality to delete or correct incorrect invoices (See \secref{sec:CorrectingInvoices} for more details).


\section{Concepts}

@@@ This section looks like it would fit great with the glossary, but it probably needs
to be elsewhere to provide some context as well...

\begin{description}
\item [Posting date]
\item [Book year]
\item [Year end]
\item [Period closing]
\item [Year end closing]
\item [Accounts receivable]
\item [Accounts payable]
\item [General ledger]
\item [Fixed assets accounting]
\item [@@@ Others?]
\end{description}

\section{Valuation of inventory}




\section{Technical overview}


% Users: database vs company users
% Companies: companies as databases


The main technical building blocks of LedgerSMB are

\begin{description}
\item[Apache HTTPD] In a standard setup, the role of the http server is very limited. It
may be used to perform some security checks such as
\begin{itemize}
\item restrict the range of IP addresses from which connections are allowed
\item run the LedgerSMB application in an
suEXEC\footnote{http://en.wikipedia.org/wiki/suEXEC} restricted environment
\end{itemize}
\item[PostgreSQL] The database component has multiple functions:
\begin{itemize}
\item Authentication (checking user credentials)
\item Authorization (limiting user access in accordance with roles assigned)
\item Data storage and retrieval
\item Data consistency enforcement
\end{itemize}
This is achieved by creating databases with a large number of LedgerSMB specific
functions and roles.
\item[Intermediate layer] This layer contains the code to mediate between the web
and the database.  For one thing, it forwards authentication requests from the web
to the database.  Additionally, it interprets web requests, reading, updating and
writing to the database, generating the appropriate responses to be shown in the
user's browser.
\end{description}

Due to the architecture described above, where the authentication and authorization
are handed off to PostgreSQL, the development team is able to prevent writing their
own - error prone - authentication code, leveraging widely used and tested code instead.


\section{Functional overview}

One of the main things to remember when working in an \gls{erp} is that nearly everything is
linked to the ledger in one way or another.  This relation is much stronger in \gls{erp}
systems than others, where accounting information is much more often an after-thought,
if a subject at all.  Since an \gls{erp} includes accounting, being able to post to the
ledger is part of the design from the beginning.

% others?




\section{Technical components}

The intermediate layer itself consists of several parts and - as far as code written
after 2007 is concerned - is modelled after the Model-View-Controller design paradigm.
Most of the model has been implemented in the database and its stored procedures, meaning
that the intermediate layer itself implements the view and the controller.

The view - meaning the output as sent in response to the web requests - is generated
using templates.  These templates use the highly respected and often-used Perl templating
library Template Toolkit\footnote{\url{http://template-toolkit.org}}.

Code written before 2007 is to be replaced in due course and will follow the same
pattern.


\chapter{Introduction to accounting}
\label{cha:AccountingIntroduction}
